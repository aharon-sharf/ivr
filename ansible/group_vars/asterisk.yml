# Asterisk Configuration Variables

# Project and Environment
project_name: "mass-voice-campaign"
# environment is passed as extra var from GitHub Actions: -e "environment=$ENV"
aws_region: "il-central-1"

# Asterisk version
asterisk_version: "23.2.0"

# SIP Trunk Configuration (Twilio Provider)
sip_trunk_provider: "twilio"
sip_trunk_host: "aharon-sharf-ivr.pstn.twilio.com"
sip_trunk_username: "{{ lookup('env', 'SIP_TRUNK_USERNAME') | default('demo_user', true) }}"
sip_trunk_password: "{{ lookup('env', 'SIP_TRUNK_PASSWORD') | default('demo_pass', true) }}"
sip_trunk_context: "from-trunk"

# Twilio SIP IP Ranges for Security Group
twilio_sip_ip_ranges:
  - "54.172.60.0/30"    # North America Virginia
  - "54.244.51.0/30"    # North America Oregon
  - "54.171.127.0/30"   # Europe Dublin
  - "54.65.63.192/30"   # Asia Pacific Singapore
  - "54.252.254.64/30"  # Asia Pacific Sydney
  - "54.233.167.224/30" # South America SÃ£o Paulo
  - "35.156.191.128/30" # Europe Frankfurt
  - "54.199.254.184/30" # Asia Pacific Tokyo

# Twilio Media IP Range (Global)
twilio_media_ip_range: "168.86.128.0/18"

# AMI Configuration
ami_enabled: true
ami_port: 5038
ami_username: "admin"
ami_password: "{{ lookup('env', 'AMI_PASSWORD') | default('asterisk_ami_secure_2023', true) }}"

# ARI Configuration
ari_enabled: true
ari_port: 8088
ari_username: "asterisk"
ari_password: "{{ lookup('env', 'ARI_PASSWORD') | default('asterisk_ari_secure_2023', true) }}"

# RTP Port Range
rtp_start: 10000
rtp_end: 20000

# Node.js Worker Configuration
nodejs_worker_port: 3000
nodejs_worker_dir: "/opt/asterisk-worker"

# AWS Configuration
s3_audio_bucket: "{{ lookup('env', 'S3_AUDIO_BUCKET') | default('demo-audio-bucket', true) }}"

# Logging
asterisk_log_level: "verbose,debug,notice,warning,error"

# Redis Configuration (self-hosted on Asterisk server)
redis_password: "redis_secure_password_2023"  # Default, will be overridden by task
redis_port: 6379
redis_bind_address: "0.0.0.0"  # Bind to all interfaces (secured by security group)
redis_maxmemory: "512mb"
redis_maxmemory_policy: "allkeys-lru"
redis_save_intervals:
  - "900 1"    # Save after 900 seconds if at least 1 key changed
  - "300 10"   # Save after 300 seconds if at least 10 keys changed
  - "60 10000" # Save after 60 seconds if at least 10000 keys changed
redis_appendonly: "yes"
redis_appendfsync: "everysec"

# Twilio Caller ID (must be a verified number in your Twilio account)
twilio_caller_id: "{{ lookup('env', 'TWILIO_CALLER_ID') | default('+16206986614', true) }}"
