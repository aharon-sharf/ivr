# Asterisk Configuration Variables

# Project and Environment
project_name: "mass-voice-campaign"
# environment is passed as extra var from GitHub Actions: -e "environment=$ENV"
aws_region: "il-central-1"

# Asterisk version
asterisk_version: "23.1.0"

# SIP Trunk Configuration (Israeli Provider)
sip_trunk_provider: "019"  # or "Partner"
sip_trunk_host: "sip.019.co.il"  # Replace with actual provider SIP server
sip_trunk_username: "{{ lookup('env', 'SIP_TRUNK_USERNAME') | default('demo_user', true) }}"
sip_trunk_password: "{{ lookup('env', 'SIP_TRUNK_PASSWORD') | default('demo_pass', true) }}"
sip_trunk_context: "from-trunk"

# AMI Configuration
ami_enabled: true
ami_port: 5038
ami_username: "admin"
ami_password: "{{ lookup('env', 'AMI_PASSWORD') | default('asterisk_ami_secure_2023', true) }}"

# ARI Configuration
ari_enabled: true
ari_port: 8088
ari_username: "asterisk"
ari_password: "{{ lookup('env', 'ARI_PASSWORD') | default('asterisk_ari_secure_2023', true) }}"

# RTP Port Range
rtp_start: 10000
rtp_end: 20000

# Node.js Worker Configuration
nodejs_worker_port: 3000
nodejs_worker_dir: "/opt/asterisk-worker"

# AWS Configuration
s3_audio_bucket: "{{ lookup('env', 'S3_AUDIO_BUCKET') | default('demo-audio-bucket', true) }}"

# Logging
asterisk_log_level: "verbose,debug,notice,warning,error"

# Redis Configuration (self-hosted on Asterisk server)
redis_password: "redis_secure_password_2023"  # Default, will be overridden by task
redis_port: 6379
redis_bind_address: "0.0.0.0"  # Bind to all interfaces (secured by security group)
redis_maxmemory: "512mb"
redis_maxmemory_policy: "allkeys-lru"
redis_save_intervals:
  - "900 1"    # Save after 900 seconds if at least 1 key changed
  - "300 10"   # Save after 300 seconds if at least 10 keys changed
  - "60 10000" # Save after 60 seconds if at least 10000 keys changed
redis_appendonly: "yes"
redis_appendfsync: "everysec"
